<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 Not Found - System Terminal</title>
    <style>
        :root {
            --bg-color: #0c0c0c;
            --text-color: #00ff00;
            --border-color: #444;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* CMD 창 디자인 */
        .terminal {
            width: 600px;
            border: 2px solid var(--border-color);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .terminal-header {
            background-color: var(--border-color);
            color: #ddd;
            padding: 5px 10px;
            display: flex;
            justify-content: space-between;
            font-size: 12px;
        }

        .terminal-body {
            padding: 20px;
            background-color: black;
        }

        .error-code { color: #ff5555; font-weight: bold; }

        /* 게임 캔버스 */
        #gameCanvas {
            border-bottom: 1px solid var(--text-color);
            display: block;
            margin: 20px auto;
            background: #000;
        }

        .instruction {
            font-size: 0.8em;
            text-align: center;
            margin-top: 10px;
            opacity: 0.8;
        }
    </style>
</head>
<body>

<div class="terminal">
    <div class="terminal-header">
        <span>C:\Windows\System32\404_error.exe</span>
        <span>_ □ X</span>
    </div>
    <div class="terminal-body">
        <div><span class="error-code">[ERROR]</span> HTTP 404: PAGE_NOT_FOUND</div>
        <div>Requesting resources... <span style="color: yellow;">FAILED</span></div>
        <br>
        <div>System idle. Press <strong style="color: white;">[SPACE]</strong> to start Dino_Run.sys</div>
        
        <canvas id="gameCanvas" width="500" height="150"></canvas>
        
        <div class="instruction">SCORE: <span id="score">0</span></div>
    </div>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreElement = document.getElementById('score');

// 게임 변수
let score = 0;
let gameSpeed = 3;
let isGameOver = false;
let animationId;

// 공룡 객체
const dino = {
    x: 50,
    y: 130,
    width: 20,
    height: 20,
    dy: 0,
    jumpForce: 10,
    gravity: 0.6,
    grounded: false
};

// 장애물 배열
const obstacles = [];

function drawDino() {
    ctx.fillStyle = '#00ff00';
    ctx.fillRect(dino.x, dino.y - dino.height, dino.width, dino.height);
}

function spawnObstacle() {
    if (Math.random() < 0.02) {
        obstacles.push({
            x: canvas.width,
            y: 130,
            width: 15,
            height: 20 + Math.random() * 20
        });
    }
}

function drawObstacles() {
    ctx.fillStyle = '#ff5555';
    obstacles.forEach((obs, index) => {
        obs.x -= gameSpeed;
        ctx.fillRect(obs.x, obs.y - obs.height, obs.width, obs.height);

        // 충돌 감지
        if (dino.x < obs.x + obs.width &&
            dino.x + dino.width > obs.x &&
            dino.y - dino.height < obs.y &&
            dino.y > obs.y - obs.height) {
            gameOver();
        }

        // 화면 밖으로 나가면 제거
        if (obs.x + obs.width < 0) {
            obstacles.splice(index, 1);
            score++;
            scoreElement.innerText = score;
        }
    });
}

function update() {
    if (isGameOver) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // 중력 로직
    dino.dy += dino.gravity;
    dino.y += dino.dy;

    if (dino.y > 130) {
        dino.y = 130;
        dino.dy = 0;
        dino.grounded = true;
    }

    drawDino();
    spawnObstacle();
    drawObstacles();

    gameSpeed += 0.001; // 점점 빨라짐
    animationId = requestAnimationFrame(update);
}

function gameOver() {
    isGameOver = true;
    cancelAnimationFrame(animationId);
    ctx.fillStyle = "white";
    ctx.font = "20px Courier New";
    ctx.fillText("GAME OVER - Press Space", 120, 75);
}

function resetGame() {
    score = 0;
    scoreElement.innerText = score;
    obstacles.length = 0;
    gameSpeed = 3;
    isGameOver = false;
    dino.y = 130;
    update();
}

window.addEventListener('keydown', (e) => {
    if (e.code === 'Space') {
        if (isGameOver) {
            resetGame();
        } else if (dino.grounded) {
            dino.dy = -dino.jumpForce;
            dino.grounded = false;
        }
    }
});

// 초기 실행
update();
</script>

</body>
</html>
